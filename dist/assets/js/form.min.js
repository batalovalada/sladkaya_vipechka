function formValidation(e){function t(e){e=e.parentNode;e.classList.contains("error")&&(e.querySelector(".error-label").remove(),e.classList.remove("error"))}function r(e,t){var e=e.parentNode,r=document.createElement("label");r.classList.add("error-label"),r.textContent=t,e.classList.add("error"),e.append(r)}let a=!0;for(const n of e.querySelectorAll("input"))t(n),"true"!=n.dataset.email||n.value.match(/[-.\w]+@([\w-]+\.)+[\w-]+/g)||(t(n),r(n,"Email введён неверно!"),a=!1),"true"==n.dataset.required&&""==n.value&&(t(n),r(n,"Поле не заполнено!"),a=!1);return a}document.getElementById("form1").addEventListener("submit",function(e){e.preventDefault(),1==formValidation(this)&&alert("Сообшение отправлено успешно!")});